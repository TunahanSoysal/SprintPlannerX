<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Task Details</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
              rel="stylesheet"
              integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
              crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
                crossorigin="anonymous"></script>

        <!-- jQuery eklemeyi unutmayın -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"
                integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
                crossorigin="anonymous"></script>


        <script>
            function openTaskDetails(button) {
                var taskId = button.dataset.taskId;
                var taskName = button.dataset.taskName;
                var taskStatus = button.dataset.taskStatus;
                var taskDeveloper = button.dataset.taskDeveloper;
                var taskAnalyst = button.dataset.taskAnalyst;
                var taskDueDate = button.dataset.taskDueDate;
                var taskFinalSP = button.dataset.taskFinalSP;
                var taskEvent = button.dataset.taskEvent;
                var taskIsStarred = button.dataset.taskIsStarred;

                // Task nesnesini oluştur
                var task = {
                    id: taskId,
                    name: taskName,
                    status: taskStatus,
                    developer: taskDeveloper,
                    analyst: taskAnalyst,
                    dueDate: taskDueDate,
                    finalSP: taskFinalSP,
                    event: taskEvent,
                    isStarred: taskIsStarred
                };

                // Task detaylarını göster
                showTaskDetails(task);
            }

            function showTaskDetails(task) {
                // Task detaylarını liste olarak göster
                // Task detaylarını göster
                document.getElementById("taskDetailsContainer").innerHTML = "<ul>" +
                    "<li><strong>ID:</strong> " + task.id + "</li>" +
                    "<li><strong>Name:</strong> " + task.name + "</li>" +
                    "<li><strong>Status:</strong> " + task.status + "</li>" +
                    "<li><strong>Developer:</strong> " + task.developer + "</li>" +
                    "<li><strong>Analyst:</strong> " + task.analyst + "</li>" +
                    "<li><strong>Due Date:</strong> " + task.dueDate + "</li>" +
                    "<li><strong>Final SP:</strong> " + task.finalSP + "</li>" +
                    "<li><strong>Event:</strong> " + task.event + "</li>" +
                    "<li><strong>Is Starred:</strong> " + task.isStarred + "</li>" +
                    "</ul>";
            }

            function showTaskDetailAlert(task) {
                alert(task.id+task.name+task.status+ task.developer + task.analyst+ task.dueDate+task.finalSP+task.event+task.isStarred)
            }

        </script>
    </head>
    <body>
        <div class="container mt-5">
            <div class="row">
                <!-- Sol Tarafta Görev Listesi -->
                <div class="col-md-4">
                    <h4>Task List</h4>
                    <ul class="list-group">
                        <li id="taskItem" th:each="task : ${tasks}"
                            class="list-group-item list-group-item-action"
                            onclick="openTaskDetails(this)"
                            th:data-task-id="${task.ID}"
                            th:data-task-name="${task.name}"
                            th:data-task-status="${task.status}"
                            th:data-task-developer="${task.developer.username}"
                            th:data-task-analyst="${task.analyst.username}"
                            th:data-task-due-date="${task.dueDate}"
                            th:data-task-final-sp="${task.finalSP}"
                            th:data-task-event="${task.event.eventName}"
                            th:data-task-is-starred="${task.starred}">
                            <span th:text="${task.name}"></span>
                            <span th:text="${task.ID}"></span>
                        </li>
                    </ul>
                </div>

                <!-- Sağ Tarafta Görev Detayları -->
                <div class="col-md-8">
                    <div id="taskDetailsContainer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>